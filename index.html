<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>GiÃ¡ng Sinh Cá»§a Em â¤ï¸</title>
    <link href="https://fonts.googleapis.com/css2?family=Great+Vibes&family=Dancing+Script:wght@400;700&display=swap" rel="stylesheet">
    <style>
        @keyframes neonRed {
            0%, 100% { text-shadow: 0 0 5px #ff0000, 0 0 10px #ff0000, 0 0 15px #ff0000, 0 0 20px #ff0000; }
            50% { text-shadow: 0 0 2px #ff0000, 0 0 5px #ff0000, 0 0 8px #ff0000, 0 0 10px #ff0000; }
        }
        @keyframes neonWhite {
            0%, 100% { text-shadow: 0 0 5px #ffffff, 0 0 10px #ffffff, 0 0 15px #ffffff, 0 0 20px #ffffff; }
            50% { text-shadow: 0 0 2px #ffffff, 0 0 5px #ffffff, 0 0 8px #ffffff, 0 0 10px #ffffff; }
        }
        .snowflake { animation: fall linear forwards, neonWhite 1.5s infinite ease-in-out; }
        .neon-red { animation: neonRed 1.5s infinite ease-in-out; display: inline-block; }
        .neon-white { animation: neonWhite 1.5s infinite ease-in-out; display: inline-block; }

        body {
            margin: 0;
            font-family: 'Dancing Script', cursive;
            background: linear-gradient(rgba(0,0,0,0.55), rgba(0,0,0,0.55)), url('img_bg.jpg') no-repeat center center fixed;
            background-size: cover;
            color: #fff;
            text-align: center;
            min-height: 100vh;
            overflow-x: hidden;
            position: relative;
        }
        .back .message-wrapper::-webkit-scrollbar { width: 8px; }
        .back .message-wrapper::-webkit-scrollbar-track { background: rgba(255,255,255,0.2); border-radius: 10px; }
        .back .message-wrapper::-webkit-scrollbar-thumb { background: #ffd700; border-radius: 10px; }
        .back .message-wrapper::-webkit-scrollbar-thumb:hover { background: gold; }

        .christmas-menu {
            position: fixed; top: 0; left: 0; width: 100%; background: #001133; padding: 20px 0;
            box-shadow: 0 4px 20px rgba(0,0,0,0.8); z-index: 1000;
        }
        .menu-items {
            display: flex; justify-content: center; gap: 90px; font-size: 2.4em;
        }
        .menu-items a {
            color: #ffd700; text-decoration: none; text-shadow: 0 0 15px gold; transition: 0.5s;
            display: flex; align-items: center; gap: 18px;
        }
        .menu-items a .icon { font-size: 1.2em; animation: pulse 2s infinite; }
        .menu-items a.active { color: white; text-shadow: 0 0 30px red; }
        .menu-items a:hover { transform: translateY(-8px) scale(1.15); color: white; text-shadow: 0 0 40px red; }
        @keyframes pulse { 0% { transform: scale(1); } 50% { transform: scale(1.15); } 100% { transform: scale(1); } }

        .content-wrapper { margin-top: 90px; }

        /* === ANIMATION CHUYá»‚N TAB SIÃŠU MÆ¯á»¢T === */
        section {
            position: absolute;
            top: 90px;
            left: 0;
            width: 100%;
            padding: 20px;
            box-sizing: border-box;
            opacity: 0;
            visibility: hidden;
            transform: translateY(30px); /* Chuáº©n bá»‹ trÆ°á»£t lÃªn */
            transition: opacity 0.8s cubic-bezier(0.25, 0.8, 0.25, 1),
                        transform 0.8s cubic-bezier(0.25, 0.8, 0.25, 1);
            z-index: 0;
        }
        section.active {
            position: relative;
            opacity: 1;
            visibility: visible;
            transform: translateY(0);
            z-index: 1;
        }
        /* Tab cÅ© fade out + trÆ°á»£t xuá»‘ng nháº¹ */
        section:not(.active) {
            opacity: 0;
            transform: translateY(20px);
        }

        #home .content-wrapper { display: flex; flex-direction: column; justify-content: flex-start; align-items: center; perspective: 2500px; padding-top: 20px; }
        #home h1 { font-family: 'Great Vibes', cursive; font-size: 5.5em; color: #ffd700; text-shadow: 0 0 25px #ff0000, 0 0 50px gold; margin-bottom: 30px; z-index: 2; }

        #countdown { font-family: 'Great Vibes', cursive; font-size: 4em; color: #ffd700; text-shadow: 0 0 30px #ff0000, 0 0 60px gold; margin: 20px 0 50px; animation: glow 2s infinite alternate; }
        .countdown-item { display: inline-block; margin: 0 20px; }
        .countdown-number { font-size: 1.8em; display: block; color: white; text-shadow: 0 0 20px red; }
        .countdown-label { font-size: 0.6em; color: #ff6b6b; text-transform: uppercase; letter-spacing: 3px; }
        @keyframes glow { from { text-shadow: 0 0 20px #ff0000, 0 0 40px gold; } to { text-shadow: 0 0 40px #ff0000, 0 0 80px gold; } }

        #warningOverlay { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0); z-index: 3998; opacity: 0; visibility: hidden; transition: opacity 0.4s ease; }
        #warningOverlay.active { opacity: 1; visibility: visible; background: rgba(0,0,0,0.6); }
        #warningModal {
            position: fixed; top: 50%; left: 50%; transform: translate(-50%, -50%) scale(0.7);
            width: 90%; max-width: 600px; background: rgba(255,255,255,0.95); border-radius: 30px;
            padding: 40px; box-shadow: 0 20px 80px rgba(255,215,0,0.8); z-index: 3999;
            opacity: 0; visibility: hidden; transition: all 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            text-align: center; display: flex; flex-direction: column; align-items: center;
        }
        #warningModal.active { opacity: 1; visibility: visible; transform: translate(-50%, -50%) scale(1); }
        #warningModal h3 { font-family: 'Great Vibes', cursive; font-size: 4em; color: #d40000; text-shadow: 0 0 20px gold; margin-bottom: 30px; }
        #warningModal p { font-size: 2.5em; color: #333; margin-bottom: 40px; }
        #countdownWarning { margin: 20px 0 40px; font-size: 3em; }
        #closeWarningBtn {
            padding: 15px 40px; font-size: 2em; background: linear-gradient(45deg, #ff0000, #ff6b6b);
            color: white; border: none; border-radius: 30px; cursor: pointer;
            box-shadow: 0 0 30px rgba(255,0,0,0.6); transition: 0.3s;
        }
        #closeWarningBtn:hover { transform: scale(1.1); box-shadow: 0 0 50px rgba(255,0,0,0.8); }

        .card-container {
            position: relative; width: 420px; height: 546px;
            transition: width 0.8s ease, transform 0.8s ease; transform-style: preserve-3d;
            z-index: 1; cursor: pointer; margin: 0 auto;
        }
        .card-container.unlocked:hover { width: 900px; }
        .card { position: absolute; width: 100%; height: 100%; transform-style: preserve-3d; transition: transform 1.5s cubic-bezier(0.175, 0.885, 0.32, 1.275); }
        .card-container.unlocked:hover .card { transform: rotateY(-180deg); }
        .front, .back {
            position: absolute; width: 100%; height: 100%; backface-visibility: hidden;
            border-radius: 25px; overflow: hidden; box-shadow: 0 25px 80px rgba(0,0,0,0.9);
            background-size: cover; background-position: center;
        }
        .front { background: url('thumbnail.png') center/cover no-repeat; display: flex; flex-direction: column; justify-content: flex-end; align-items: center; padding-bottom: 30px; }
        #message .front { background: url('gift_out.png') center/cover no-repeat; }
        .front .hint { font-size: 1.6em; color: #fff; background: rgba(0,0,0,0.5); padding: 10px 25px; border-radius: 20px; text-shadow: 0 0 10px black; }
        .back { background: url('in_thumbnail.png') center/cover no-repeat; transform: rotateY(180deg); display: flex; flex-direction: column; justify-content: flex-start; align-items: center; padding: 50px 80px; overflow: hidden; }
        .back .message-wrapper { width: 100%; height: 100%; overflow-y: auto; padding-right: 15px; box-sizing: border-box; position: relative; }
        .back .message { font-size: 2.0em; line-height: 1.8; color: #4a1a1a; text-shadow: 1px 1px 2px rgba(255,255,255,0.6); text-align: left; max-width: 100%; }
        .back .signature { margin-top: 40px; text-align: right; width: 100%; font-size: 1.1em; font-weight: bold; }
        #message .back .message { font-size: 2.4em; }
        #message .back .signature { font-size: 1.4em; margin-top: 50px; }
        #revealReplyBtn {
            position: absolute; bottom: -300px; left: 40px; padding: 10px 25px; font-size: 1.5em;
            background: rgba(255,0,0,0.85); color: white; border: none; border-radius: 30px;
            cursor: pointer; box-shadow: 0 0 25px rgba(255,0,0,0.7); transition: all 0.3s ease;
            opacity: 0; visibility: hidden; z-index: 10;
        }
        #revealReplyBtn.visible { opacity: 1; visibility: visible; }
        #revealReplyBtn:hover { transform: scale(1.1); background: red; box-shadow: 0 0 40px rgba(255,0,0,0.9); }

        #replyOverlay { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0); z-index: 1999; opacity: 0; visibility: hidden; transition: opacity 0.4s ease; }
        #replyOverlay.active { opacity: 1; visibility: visible; background: rgba(0,0,0,0.6); }
        #replyModal {
            position: fixed; top: 50%; left: 50%; transform: translate(-50%, -50%) scale(0.7);
            width: 90%; max-width: 600px; background: rgba(255,255,255,0.95); border-radius: 30px;
            padding: 40px; box-shadow: 0 20px 80px rgba(255,215,0,0.8); z-index: 2000;
            opacity: 0; visibility: hidden; transition: all 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            display: flex; flex-direction: column; align-items: center;
        }
        #replyModal.active { opacity: 1; visibility: visible; transform: translate(-50%, -50%) scale(1); }
        #replyModal h3 { font-family: 'Great Vibes', cursive; font-size: 4em; color: #d40000; text-shadow: 0 0 20px gold; margin-bottom: 30px; }
        #replyTextarea { width: 100%; height: 180px; padding: 20px; font-family: 'Dancing Script', cursive; font-size: 2em; border: 4px solid #ff6b6b; border-radius: 20px; background: white; color: #333; resize: none; box-sizing: border-box; margin-bottom: 30px; }
        #sendReplyBtn { padding: 15px 40px; font-size: 2em; background: linear-gradient(45deg, #ff0000, #ff6b6b); color: white; border: none; border-radius: 30px; cursor: pointer; box-shadow: 0 0 30px rgba(255,0,0,0.6); transition: 0.3s; }
        #sendReplyBtn:hover { transform: scale(1.1); box-shadow: 0 0 50px rgba(255,0,0,0.8); }
        #replyMessage { margin-top: 30px; font-size: 2.5em; color: #d40000; text-shadow: 0 0 20px gold; display: none; }

        .modal { position: fixed; top: 0; left: 0; width: 100%; height: 100%; z-index: 2000; display: flex; justify-content: center; align-items: center; padding: 20px; box-sizing: border-box; pointer-events: none; }
        .modal.active { pointer-events: auto; }
        .modal-overlay { position: absolute; top: 0; left: 0; width: 100%; height: 100%; background-color: rgba(0,0,0,0); transition: background-color 0.5s ease; z-index: -1; }
        .modal.active .modal-overlay { background-color: rgba(0,0,0,0.85); }
        .modal-content { max-width: 90%; max-height: 90vh; border-radius: 20px; box-shadow: 0 0 80px rgba(255,215,0,0.8); object-fit: contain; transform: scale(0.7); opacity: 0; transition: transform 0.5s cubic-bezier(0.175, 0.885, 0.32, 1.275), opacity 0.5s ease; }
        .modal.active .modal-content { transform: scale(1); opacity: 1; }
        .close { position: fixed; top: 20px; right: 30px; color: #fff; font-size: 50px; cursor: pointer; text-shadow: 0 0 20px red, 0 0 30px gold; z-index: 2100; background: rgba(0,0,0,0.6); width: 60px; height: 60px; border-radius: 50%; display: flex; justify-content: center; align-items: center; transition: opacity 0.5s ease, transform 0.3s; opacity: 0; }
        .modal.active .close { opacity: 1; }
        .close:hover { transform: scale(1.2); background: rgba(139,0,0,0.8); }

        #loadMoreBtn { margin: 80px auto 200px; padding: 15px 50px; font-size: 2.5em; background: linear-gradient(45deg, #ff6b6b, #ff0000); color: white; border: none; border-radius: 50px; cursor: pointer; box-shadow: 0 0 40px rgba(255,0,0,0.6); transition: all 0.3s ease; display: block; }
        #loadMoreBtn:hover { transform: scale(1.1); box-shadow: 0 0 60px rgba(255,0,0,0.8); }

        #endGalleryOverlay { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0); z-index: 2999; opacity: 0; visibility: hidden; transition: opacity 0.5s ease; }
        #endGalleryOverlay.active { opacity: 1; visibility: visible; background: rgba(0,0,0,0.7); }
        #endGalleryModal {
            position: fixed; top: 50%; left: 50%; transform: translate(-50%, -50%) scale(0.7);
            width: 90%; max-width: 700px; background: rgba(255,255,255,0.98); border-radius: 40px;
            padding: 50px; box-shadow: 0 20px 100px rgba(255,215,0,0.9); z-index: 3000;
            opacity: 0; visibility: hidden; transition: all 0.5s cubic-bezier(0.175, 0.885, 0.32, 1.275); text-align: center;
        }
        #endGalleryModal.active { opacity: 1; visibility: visible; transform: translate(-50%, -50%) scale(1); }
        #endGalleryModal p { font-size: 2.8em; color: #333; line-height: 1.6; margin-bottom: 50px; text-shadow: 1px 1px 3px rgba(255,255,255,0.8); }
        #endGalleryModal .buttons { display: flex; justify-content: center; gap: 50px; }
        #endGalleryModal button { padding: 15px 50px; font-size: 2.2em; border: none; border-radius: 40px; cursor: pointer; transition: all 0.3s ease; box-shadow: 0 0 30px rgba(0,0,0,0.2); }
        #yesBtn { background: linear-gradient(45deg, #ff6b6b, #ff0000); color: white; }
        #yesBtn:hover { transform: scale(1.1); box-shadow: 0 0 50px rgba(255,0,0,0.8); }
        #noBtn { background: linear-gradient(45deg, #4a1a1a, #8b4513); color: white; }
        #noBtn:hover { transform: scale(1.1); box-shadow: 0 0 50px rgba(139,69,19,0.8); }

        #thankYouOverlay { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0); z-index: 3999; opacity: 0; visibility: hidden; transition: opacity 0.5s ease; }
        #thankYouOverlay.active { opacity: 1; visibility: visible; background: rgba(0,0,0,0.7); }
        #thankYouModal {
            position: fixed; top: 50%; left: 50%; transform: translate(-50%, -50%) scale(0.7);
            width: 90%; max-width: 700px; background: rgba(255,255,255,0.98); border-radius: 40px;
            padding: 60px; box-shadow: 0 20px 100px rgba(255,215,0,0.9); z-index: 4000;
            opacity: 0; visibility: hidden; transition: all 0.5s cubic-bezier(0.175, 0.885, 0.32, 1.275); text-align: center;
        }
        #thankYouModal.active { opacity: 1; visibility: visible; transform: translate(-50%, -50%) scale(1); }
        #thankYouModal p { font-size: 3.2em; color: #d40000; line-height: 1.6; margin: 0; text-shadow: 0 0 20px gold; }

        .home-tree, .message-tree { 
    position: fixed; 
    bottom: 60px; 
    width: 220px; 
    z-index: -1; /* Äáº©y cÃ¢y thÃ´ng xuá»‘ng dÆ°á»›i note vÃ  má»i thá»© */
    animation: swayStrong 6s infinite ease-in-out; 
    filter: drop-shadow(0 0 40px rgba(255,215,0,0.8)); 
    pointer-events: none; 
    display: none; 
}
        .home-tree-left, .message-tree-left { left: 50px; }
        .home-tree-right, .message-tree-right { right: 50px; }
        #home.active ~ .home-tree, #message.active ~ .message-tree { display: block; }
        @keyframes swayStrong { 0% { transform: rotate(0deg) translateY(0); } 25% { transform: rotate(6deg) translateY(-10px); } 50% { transform: rotate(0deg) translateY(0); } 75% { transform: rotate(-6deg) translateY(-10px); } 100% { transform: rotate(0deg) translateY(0); } }

        #gallery h2, #message h2 { font-family: 'Great Vibes', cursive; font-size: 5em; color: #ffd700; text-shadow: 0 0 25px #ff0000, 0 0 50px gold; margin: 60px 0 20px 0; }
        .gallery-container { position: relative; min-height: 2200px; margin: 0 auto; }
        .garland-row { position: absolute; width: 110%; left: -5%; pointer-events: none; filter: drop-shadow(0 0 20px rgba(255,215,0,0.8)); opacity: 0.9; }
        .garland-row:nth-child(1) { top: 30px; }
        .garland-row:nth-child(2) { top: 430px; opacity: 0.8; }
        .garland-row:nth-child(3) { top: 830px; opacity: 0.85; }
        .garland-row:nth-child(4) { top: 1230px; opacity: 0.9; }
        .garland-row:nth-child(5) { top: 1630px; opacity: 0.8; }
        .photos-grid { display: flex; flex-wrap: wrap; justify-content: center; gap: 60px; padding: 100px 50px 100px; position: relative; z-index: 10; }
        .photo-frame { width: 220px; background: white; padding: 15px 15px 20px 15px; box-shadow: 0 15px 40px rgba(0,0,0,0.8); transition: transform 0.6s ease; cursor: pointer; display: flex; flex-direction: column; transform: rotate(var(--rotate, 0deg)); }
        .photo-frame img { width: 100%; height: auto; max-height: 300px; object-fit: cover; border-radius: 8px; flex-grow: 1; }
        .photo-frame:hover { transform: rotate(var(--rotate, 0deg)) scale(1.4); z-index: 50; box-shadow: 0 0 100px gold; }
        #message .message-content { margin: 100px auto 200px; }
        .snowflake { position: fixed; top: -50px; color: #fff; font-size: 1.8em; pointer-events: none; animation: fall linear forwards; z-index: 1500; user-select: none; will-change: transform; }
        @keyframes fall { to { transform: translateY(110vh); } }
        #musicToggle { position: fixed; bottom: 20px; right: 20px; background: rgba(0,0,0,0.6); border: 2px solid gold; border-radius: 50%; width: 60px; height: 60px; font-size: 30px; color: white; cursor: pointer; z-index: 200; display: flex; justify-content: center; align-items: center; box-shadow: 0 0 20px gold; transition: 0.3s; }
        #musicToggle:hover { transform: scale(1.1); background: rgba(139,0,0,0.7); }
        #rotateMessage { position: fixed; top: 0; left: 0; width: 100%; height: 100vh; background: rgba(0, 0, 0, 0.8); color: #fff; font-size: 2em; display: none; flex-direction: column; justify-content: center; align-items: center; z-index: 5000; text-align: center; padding: 20px; }
        #rotateMessage .icon { font-size: 4em; margin-bottom: 20px; animation: rotateAnimation 2s infinite; }
        @keyframes rotateAnimation { 0% { transform: rotate(0deg); } 50% { transform: rotate(90deg); } 100% { transform: rotate(0deg); } }

/* NOTES - Chá»‰ hiá»‡n á»Ÿ trang Message */
/* NOTES - Chá»‰ hiá»‡n á»Ÿ trang Message */
.notes-container {
    position: absolute; 
    top: 0; left: 0; width: 100%; height: 100%;
    pointer-events: none; 
    z-index: 200; /* Ráº¥t cao, vÆ°á»£t qua cÃ¢y thÃ´ng (10) vÃ  má»i thá»© khÃ¡c */
}

.notes-left, .notes-right {
    position: fixed; 
    top: 50%; 
    transform: translateY(-50%);
    display: flex; 
    flex-direction: column; 
    gap: 70px; 
    pointer-events: auto;
}
.notes-left { left: -240px; }
.notes-right { right: -240px; }

.note {
    width: 360px; height: 120px;
    background: no-repeat center / cover;
    display: flex; align-items: center; justify-content: center;
    cursor: pointer;
    transition: transform 0.6s cubic-bezier(0.175, 0.885, 0.32, 1.275);
    position: relative; /* Quan trá»ng: Ä‘á»ƒ z-index hoáº¡t Ä‘á»™ng */
    z-index: 210; /* Cao hÆ¡n container */
}
 /* Khi hover: note cháº¯c cháº¯n hiá»‡n trÃªn cÃ¹ng */
.note:hover {
    z-index: 9999 !important; /* Cá»±c cao â†’ khÃ´ng gÃ¬ che Ä‘Æ°á»£c */
}

.left-note { background-image: url('note.png'); }
.right-note { background-image: url('note_1.png'); }

.left-note:hover { transform: translateX(180px) !important; }
.right-note:hover { transform: translateX(-180px) !important; }

.note-text {
    font-size: 32px; color: #333; font-weight: bold;
    opacity: 0; transition: opacity 0.7s ease 0.1s;
}
.note:hover .note-text { opacity: 1; }

.left-note .note-text { margin-left: 0; }
.left-note:hover .note-text { margin-left: 70px; }
.right-note .note-text { margin-right: 0; }
.right-note:hover .note-text { margin-right: 70px; }
        @media (max-width: 767px) {
            .notes-left { left: -200px; gap: 50px; }
            .notes-right { right: -200px; }
            .note { width: 300px; height: 100px; }
            .left-note:hover { transform: translateX(170px) !important; }
            .right-note:hover { transform: translateX(-170px) !important; }
            .note-text { font-size: 26px; }
            .left-note:hover .note-text { margin-left: 80px; }
            .right-note:hover .note-text { margin-right: 80px; }
        }

        #noteOverlay { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0); z-index: 3998; opacity: 0; visibility: hidden; transition: opacity 0.4s ease; }
        #noteOverlay.active { opacity: 1; visibility: visible; background: rgba(0,0,0,0.6); }
        #noteModal { position: fixed; top: 50%; left: 50%; transform: translate(-50%, -50%) scale(0.7); width: 90%; max-width: 600px; background: rgba(255,255,255,0.95); border-radius: 30px; padding: 40px; box-shadow: 0 20px 80px rgba(255,215,0,0.8); z-index: 3999; opacity: 0; visibility: hidden; transition: all 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275); text-align: center; }
        #noteModal.active { opacity: 1; visibility: visible; transform: translate(-50%, -50%) scale(1); }
        #noteTitle { font-family: 'Great Vibes', cursive; font-size: 4em; color: #d40000; text-shadow: 0 0 20px gold; margin-bottom: 30px; }
        #noteContent { font-size: 2.5em; color: #333; margin-bottom: 40px; }
        #closeNoteBtn { padding: 15px 40px; font-size: 2em; background: linear-gradient(45deg, #ff0000, #ff6b6b); color: white; border: none; border-radius: 30px; cursor: pointer; box-shadow: 0 0 30px rgba(255,0,0,0.6); transition: 0.3s; }
        #closeNoteBtn:hover { transform: scale(1.1); box-shadow: 0 0 50px rgba(255,0,0,0.8); }

        @media screen and (max-width: 767px) {
            .christmas-menu { padding: 10px 0; }
            .menu-items { gap: 30px; font-size: 1.8em; }
            #home h1 { font-size: 3.5em; }
            #countdown { font-size: 2.5em; }
            .countdown-item { margin: 0 10px; }
            .card-container { width: 100%; height: auto; max-width: 420px; }
            .card-container.unlocked:hover { width: 100%; }
            .back { padding: 30px 40px; }
            .back .message { font-size: 1.6em; }
            #message .back .message { font-size: 1.8em; }
            .photos-grid { gap: 30px; padding: 50px 20px; }
            .photo-frame { width: 180px; }
            .home-tree, .message-tree { width: 150px; bottom: 30px; }
            .home-tree-left, .message-tree-left { left: 10px; }
            .home-tree-right, .message-tree-right { right: 10px; }
            #gallery h2, #message h2 { font-size: 3.5em; }
            #loadMoreBtn { font-size: 2em; padding: 10px 30px; }
            body.portrait #rotateMessage { display: flex; }
            body.portrait > *:not(#rotateMessage) { display: none; }
        }
    </style>
</head>
<body>
    <div id="rotateMessage">
        <div class="icon">ğŸ“±â†”ï¸</div>
        <p>Vui lÃ²ng xoay ngang Ä‘iá»‡n thoáº¡i Ä‘á»ƒ xem ná»™i dung tá»‘t hÆ¡n!</p>
    </div>
    <div id="warningOverlay"></div>
    <div id="warningModal">
        <h3>ChÆ°a Ä‘áº¿n GiÃ¡ng sinh Ä‘Ã¢u em Æ¡i ğŸ„</h3>
        <p>HÃ£y chá» countdown vá» 00 nhÃ© â¤ï¸</p>
        <div id="countdownWarning">
            <div class="countdown-item"><span class="countdown-number" id="daysWarning">00</span><span class="countdown-label">NgÃ y</span></div>
            <div class="countdown-item"><span class="countdown-number" id="hoursWarning">00</span><span class="countdown-label">Giá»</span></div>
            <div class="countdown-item"><span class="countdown-number" id="minutesWarning">00</span><span class="countdown-label">PhÃºt</span></div>
            <div class="countdown-item"><span class="countdown-number" id="secondsWarning">00</span><span class="countdown-label">GiÃ¢y</span></div>
        </div>
        <button id="closeWarningBtn">ÄÃ³ng</button>
    </div>
    <div id="noteOverlay"></div>
    <div id="noteModal">
        <h3 id="noteTitle"></h3>
        <p id="noteContent"></p>
        <button id="closeNoteBtn">ÄÃ³ng</button>
    </div>
    <div class="christmas-menu">
        <div class="menu-items">
            <a href="#" onclick="trySwitchTab('home')" class="active"><span class="icon">ğŸ </span> Home</a>
            <a href="#" onclick="trySwitchTab('gallery')"><span class="icon">ğŸ–¼ï¸</span> Gallery</a>
            <a href="#" onclick="trySwitchTab('message')"><span class="icon">ğŸ’Œ</span> Message</a>
        </div>
    </div>
    <section id="home" class="active">
        <div class="content-wrapper">
            <h1>ChÃºc Em GiÃ¡ng Sinh Vui Váº» <span class="neon-red">â¤ï¸</span><span class="neon-white">â„ï¸</span></h1>
            <div id="countdown">
                <div class="countdown-item"><span class="countdown-number" id="days">00</span><span class="countdown-label">NgÃ y</span></div>
                <div class="countdown-item"><span class="countdown-number" id="hours">00</span><span class="countdown-label">Giá»</span></div>
                <div class="countdown-item"><span class="countdown-number" id="minutes">00</span><span class="countdown-label">PhÃºt</span></div>
                <div class="countdown-item"><span class="countdown-number" id="seconds">00</span><span class="countdown-label">GiÃ¢y</span></div>
            </div>
            <div class="card-container">
                <div class="card">
                    <div class="front"><div class="hint">Di chuá»™t vÃ o Ä‘á»ƒ má»Ÿ thiá»‡p nhÃ©!</div></div>
                    <div class="back">
                        <div class="message-wrapper">
                            <div class="message">
                                Gá»­i em!<br>
                                ChÃºc em cÃ³ má»™t mÃ¹a GiÃ¡ng Sinh an lÃ nh. <br>
                                MÃ¬nh chá»‰ mong em Ä‘Æ°á»£c bÃ¬nh yÃªn â€“ bÃ¬nh yÃªn trong lÃ²ng, trong suy nghÄ© vÃ  trong cÃ¡ch em Ä‘á»‘i diá»‡n vá»›i má»i Ä‘iá»u.<br>
                                Giá»¯a nhá»¯ng ngÃ y Ä‘Ã´ng láº¡nh giÃ¡, mong em váº«n cáº£m nháº­n Ä‘Æ°á»£c sá»± áº¥m Ã¡p tá»« nhá»¯ng Ä‘iá»u dá»‹u dÃ ng mÃ¬nh dÃ nh riÃªng cho em.<br>
                                MÃ¬nh mong em luÃ´n tin vÃ o chÃ­nh báº£n thÃ¢n, tin ráº±ng em xá»©ng Ä‘Ã¡ng vá»›i yÃªu thÆ°Æ¡ng chÃ¢n thÃ nh vÃ  nhá»¯ng Ä‘iá»u tá»‘t Ä‘áº¹p nháº¥t.<br>
                                DÃ¹ cuá»™c sá»‘ng Ä‘Ã´i khi khiáº¿n em má»‡t má»i, thÃ¬ GiÃ¡ng sinh nÃ y hÃ£y lÃ  khoáº£ng láº·ng Ä‘á»ƒ em thá»Ÿ cháº­m hÆ¡n, má»‰m cÆ°á»i nhiá»u hÆ¡n vÃ  tháº¥y lÃ²ng nháº¹ nhÃ ng.<br>
                                ChÃºc em má»™t mÃ¹a Noel an lÃ nh, áº¥m Ã¡p vÃ  tháº­t Ä‘áº¹p â€” theo cÃ¡ch ráº¥t riÃªng cá»§a em. ğŸ„<br><br>
                                <div class="signature">
                                    ThÆ°Æ¡ng, nhá»› em nhiá»u láº¯mâ¤ï¸<br>
                                    TrÃ­ thá»‘i
                                </div>
                            </div>
                            <button id="revealReplyBtn">ğŸ’Œ Gá»­i lá»i chÃºc láº¡i</button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>
    <section id="gallery">
        <div class="content-wrapper">
            <h2>CÃ´ng ChÃºa VÃ  Cá»©t Thá»‘i<span class="neon-red">â¤ï¸</span></h2>
            <div class="gallery-container">
                <img src="bulb.png" class="garland-row">
                <img src="bulb.png" class="garland-row">
                <img src="bulb.png" class="garland-row">
                <img src="bulb.png" class="garland-row">
                <img src="bulb.png" class="garland-row">
                <div class="photos-grid" id="photosGrid"></div>
                <button id="loadMoreBtn">Load thÃªm áº£nh ğŸ„</button>
            </div>
        </div>
    </section>
    <section id="message">
        <div class="content-wrapper">
            <h2>Lá»i Nháº¯n Äáº·c Biá»‡t</h2>
            <div class="card-container">
                <div class="card">
                    <div class="front"><div class="hint">Di chuá»™t vÃ o Ä‘á»ƒ má»Ÿ thÆ° nhÃ©! ğŸ’Œ</div></div>
                    <div class="back">
                        <div class="message-wrapper">
                            <div class="message">
                                Gá»­i em!<br>
                                TrÃ­ viáº¿t cho em nhá»¯ng dÃ²ng nÃ y khÃ´ng pháº£i Ä‘á»ƒ Ä‘Ã²i há»i má»™t Ä‘iá»u gÃ¬ quÃ¡ lá»›n lao, mÃ  chá»‰ muá»‘n nÃ³i vá»›i em nhá»¯ng gÃ¬ TrÃ­ luÃ´n suy nghÄ© báº¥y lÃ¢u nay.<br>
                                TrÃ­ biáº¿t, nÄƒm lá»›p 12 vá»›i bao nhiÃªu Ã¡p lá»±c thi cá»­ vÃ  nhá»¯ng chÃ´ng chÃªnh cá»§a tuá»•i trÆ°á»Ÿng thÃ nh Ä‘ang Ä‘Ã¨ náº·ng lÃªn vai em.
                                TrÃ­ nhÃ¬n tháº¥y táº¥t cáº£, tháº¥y nhá»¯ng lÃºc em vui váº» há»“n nhiÃªn gá»­i cho TrÃ­ táº¥m áº£nh, nhÆ°ng cÅ©ng tháº¥y cáº£ nhá»¯ng lÃºc em má»‡t má»i Ä‘áº¿n má»©c muá»‘n xÃ¹ lÃ´ng lÃªn Ä‘á»ƒ Ä‘áº©y má»i thá»© ra xa.
                                Nhá»¯ng lÃºc áº¥y, em nÃ³i TrÃ­ phiá»n phá»©c, nÃ³i khÃ´ng cÃ²n tÃ¬nh cáº£m, khÃ´ng muá»‘n nháº¯n tin... TrÃ­ biáº¿t Ä‘Ã³ cÃ³ thá»ƒ chá»‰ lÃ  cÃ¡ch em pháº£n á»©ng láº¡i vá»›i nhá»¯ng Ã¡p lá»±c Ä‘ang bá»§a vÃ¢y mÃ¬nh.
                                NhÆ°ng em Ã , Ä‘á»«ng gá»“ng mÃ¬nh lÃªn quÃ¡ nhÆ° váº­y. Em khÃ´ng cáº§n pháº£i chá»‹u Ä‘á»±ng má»i thá»© má»™t mÃ¬nh Ä‘Ã¢u.<br>
                                Em thÆ°á»ng lo sá»£ chuyá»‡n hai Ä‘á»©a mÃ¬nh sáº½ lÃ m áº£nh hÆ°á»Ÿng Ä‘áº¿n cáº£m xÃºc, Ä‘áº¿n viá»‡c há»c. Em sá»£ sá»± rÃ ng buá»™c hay máº¥t thá»i gian.
                                NhÆ°ng vá»›i TrÃ­, yÃªu thÆ°Æ¡ng trÆ°á»Ÿng thÃ nh khÃ´ng cÃ³ nghÄ©a lÃ  pháº£i nháº¯n tin cho nhau suá»‘t ngÃ y, cÅ©ng khÃ´ng pháº£i lÃ  nhá»¯ng giáº­n há»n vÃ´ cá»› lÃ m máº¥t thá»i gian cá»§a nhau.<br>
                                TÃ¬nh cáº£m TrÃ­ dÃ nh cho em, Ä‘Æ¡n giáº£n lÃ  sá»± hiá»‡n diá»‡n. LÃ  Ä‘á»ƒ em biáº¿t ráº±ng, giá»¯a nhá»¯ng ngÃ y thÃ¡ng quay cuá»“ng nÃ y, luÃ´n cÃ³ má»™t ngÆ°á»i sáºµn sÃ ng Ä‘á»©ng Ä‘Ã³ lÃ m chá»— dá»±a cho em.
                                LÃ  khi em má»‡t má»i nháº¥t, em biáº¿t mÃ¬nh cÃ³ má»™t nÆ¡i Ä‘á»ƒ Ä‘Æ°á»£c láº¯ng nghe, Ä‘Æ°á»£c vá»— vá», hoáº·c chá»‰ Ä‘Æ¡n giáº£n lÃ  Ä‘Æ°á»£c im láº·ng bÃªn cáº¡nh nhau mÃ  tháº¥y lÃ²ng bÃ¬nh yÃªn.<br>
                                Em tá»«ng trÃ¡ch TrÃ­ láº±ng nháº±ng, khÃ´ng Ä‘i tháº³ng vÃ o váº¥n Ä‘á». NhÆ°ng thá»±c lÃ²ng, má»—i láº§n TrÃ­ muá»‘n Ä‘á»‘i diá»‡n Ä‘á»ƒ lÃ m rÃµ hÆ°á»›ng Ä‘i cho cáº£ hai, thÃ¬ em láº¡i chá»n cÃ¡ch nÃ© trÃ¡nh, tá»« chá»‘i gáº·p máº·t.
                                Sá»± im láº·ng hay nhá»¯ng cÃ¢u tráº£ lá»i chung chung cá»§a em má»›i lÃ  Ä‘iá»u khiáº¿n chÃºng mÃ¬nh day dá»©t mÃ£i khÃ´ng thÃ´i. CÃ³ láº½ Ä‘Ã³ má»›i lÃ  Ä‘iá»u Ä‘ang bÃ o mÃ²n nÄƒng lÆ°á»£ng cá»§a hai ta Ä‘áº¥y!<br>
                                TrÃ­ váº«n á»Ÿ Ä‘Ã¢y, nhÃ¬n tháº¥y cáº£ nhá»¯ng Ä‘iá»u tá»“i tá»‡ mÃ  cuá»™c sá»‘ng Ä‘ang nÃ©m vÃ o em, vÃ  TrÃ­ váº«n muá»‘n á»Ÿ láº¡i Ä‘á»ƒ che chá»Ÿ, chÄƒm sÃ³c cho em. Äá»«ng láº¥y lÃ½ do "khÃ´ng muá»‘n gáº·p" Ä‘á»ƒ trá»‘n trÃ¡nh má»™t quyáº¿t Ä‘á»‹nh ná»¯a.
                                HÃ£y cho lÃ²ng mÃ¬nh má»™t cÆ¡ há»™i Ä‘á»ƒ thÃ nh tháº­t vá»›i nhau.<br>
                                Náº¿u em cáº§n má»™t ngÆ°á»i Ä‘á»“ng hÃ nh Ä‘á»ƒ bá»›t cÃ´ Ä‘Æ¡n trÃªn cháº·ng Ä‘Æ°á»ng khÃ³ khÄƒn nÃ y, TrÃ­ luÃ´n á»Ÿ Ä‘Ã¢y. CÃ²n náº¿u em thá»±c sá»± muá»‘n dá»«ng láº¡i, hÃ£y dÅ©ng cáº£m nÃ³i vá»›i TrÃ­ má»™t lá»i dá»©t khoÃ¡t khi mÃ¬nh gáº·p máº·t nhau.<br>
                                TrÃ­ luÃ´n sáºµn sÃ ng chá» Ä‘á»£i má»™t cÃ¢u tráº£ lá»i tháº­t tÃ¢m nháº¥t tá»« em, dÃ¹ nÃ³ lÃ  gÃ¬ Ä‘i ná»¯a.
                                <div class="signature">
                                    TrÃ­ cá»§a em
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
           <div class="notes-container">
                <div class="notes-left">
                    <!-- Note má»›i á»Ÿ trÃªn cÃ¹ng (bÃªn trÃ¡i) -->
                    <div class="note left-note" data-type="nho-em">
                        <div class="note-text">Nhá»› em</div>
                    </div>
                    <div class="note left-note" data-type="ap-luc">
                        <div class="note-text">CÃ³ chuyá»‡n buá»“n</div>
                    </div>
                    <div class="note left-note" data-type="met-moi">
                        <div class="note-text">Má»‡t má»i</div>
                    </div>
                </div>
                <div class="notes-right">
                    <!-- Note má»›i á»Ÿ trÃªn cÃ¹ng (bÃªn pháº£i) -->
                    <div class="note right-note" data-type="yeu-em">
                        <div class="note-text">YÃªu em</div>
                    </div>
                    <div class="note right-note" data-type="dang-khoc">
                        <div class="note-text">Äang khÃ³c</div>
                    </div>
                    <div class="note right-note" data-type="buon">
                        <div class="note-text">Buá»“n</div>
                    </div>
                </div>
            </div>
        </div>
    </section>
    <div id="replyOverlay"></div>
    <div id="replyModal">
        <h3>Gá»­i lá»i chÃºc GiÃ¡ng sinh láº¡i cho mÃ¬nh nhÃ© â¤ï¸</h3>
        <textarea id="replyTextarea" placeholder="Viáº¿t lá»i chÃºc cá»§a em á»Ÿ Ä‘Ã¢y..."></textarea>
        <button id="sendReplyBtn">Gá»­i Ä‘i ğŸ’Œ</button>
        <div id="replyMessage">Lá»i chÃºc cá»§a em Ä‘Ã£ bay Ä‘áº¿n mÃ¬nh rá»“i Ä‘áº¥y! â¤ï¸ğŸ„ Cáº£m Æ¡n em nhiá»u láº¯m!</div>
    </div>
    <div id="endGalleryOverlay"></div>
    <div id="endGalleryModal">
        <p>Háº¿t máº¥t rá»“i! Em cÃ³ muá»‘n cÃ¹ng Ä‘á»“ng hÃ nh vá»›i mÃ¬nh, tiáº¿p tá»¥c cá»‘ gáº¯ng, vÃ¬ nhau Ä‘á»ƒ cÃ³ thÃªm nhiá»u nhá»¯ng táº¥m áº£nh dá»… thÆ°Æ¡ng nÃ y khÃ´ng?</p>
        <div class="buttons">
            <button id="yesBtn">CÃ³ chá»© â¤ï¸</button>
            <button id="noBtn">KhÃ´ng ğŸ˜¢</button>
        </div>
    </div>
    <div id="thankYouOverlay"></div>
    <div id="thankYouModal">
        <p>Cáº£m Æ¡n em vÃ¬ Ä‘Ã£ luÃ´n á»Ÿ bÃªn mÃ¬nh.<br>ChÃºng mÃ¬nh sáº½ cÃ³ tháº­t nhiá»u ká»· niá»‡m Ä‘áº¹p hÆ¡n ná»¯a nhÃ©!</p>
    </div>
    <img src="noel_tree.png" class="home-tree home-tree-left">
    <img src="noel_tree.png" class="home-tree home-tree-right">
    <img src="noel_tree.png" class="message-tree message-tree-left">
    <img src="noel_tree.png" class="message-tree message-tree-right">
    <div id="myModal" class="modal">
        <div class="modal-overlay"></div>
        <span class="close" onclick="closeModal()">Ã—</span>
        <img class="modal-content" id="modalImg">
    </div>
    <div id="musicToggle" onclick="toggleMusic()">ğŸµ</div>
    <audio id="backgroundMusic" autoplay></audio>
    <script>
        document.addEventListener('keydown', function(e) {
            if (e.keyCode === 123 || (e.ctrlKey && e.shiftKey && e.keyCode === 73) || (e.ctrlKey && e.shiftKey && e.keyCode === 74) || (e.ctrlKey && e.keyCode === 85) || (e.ctrlKey && e.shiftKey && e.keyCode === 67)) {
                e.preventDefault();
                return false;
            }
        });
        document.addEventListener('contextmenu', function(e) { e.preventDefault(); return false; });

        let isUnlocked = false;
        const christmasDate = new Date(Date.now() + 1000).getTime();
        const countdownElement = document.getElementById('countdown');
        const greetingTitle = document.querySelector('#home h1');
        const allCardContainers = document.querySelectorAll('.card-container');

        const successOverlay = document.createElement('div');
        successOverlay.id = 'successOverlay';
        successOverlay.style.cssText = 'position:fixed;top:0;left:0;width:100%;height:100%;background:rgba(0,0,0,0.7);z-index:4998;display:flex;justify-content:center;align-items:center;opacity:0;visibility:hidden;transition:opacity 0.6s ease;';
        const successModal = document.createElement('div');
        successModal.style.cssText = 'background:rgba(255,255,255,0.98);padding:50px;border-radius:40px;text-align:center;box-shadow:0 20px 100px gold;max-width:600px;width:90%;transform:scale(0.7);opacity:0;visibility:hidden;transition:all 0.6s cubic-bezier(0.175,0.885,0.32,1.275);';
        successModal.innerHTML = `
            <h3 style="font-family:'Great Vibes',cursive;font-size:4.5em;color:#d40000;text-shadow:0 0 30px gold;margin-bottom:30px;">
                GiÃ¡ng Sinh Äáº¿n Rá»“i! ğŸ„â¤ï¸
            </h3>
            <p style="font-size:2.8em;color:#333;line-height:1.6;">
                ChÃºc em má»™t mÃ¹a GiÃ¡ng sinh tháº­t áº¥m Ã¡p, vui váº» vÃ  trÃ n Ä‘áº§y yÃªu thÆ°Æ¡ng!<br>
                Giá» em cÃ³ thá»ƒ má»Ÿ thiá»‡p, xem áº£nh vÃ  gá»­i lá»i chÃºc rá»“i Ä‘áº¥y â¤ï¸
            </p>
            <button style="margin-top:40px;padding:15px 50px;font-size:2.2em;background:linear-gradient(45deg,#ff0000,#ff6b6b);color:white;border:none;border-radius:40px;cursor:pointer;box-shadow:0 0 40px rgba(255,0,0,0.7);">
                ÄÃ³ng
            </button>
        `;
        successOverlay.appendChild(successModal);
        document.body.appendChild(successOverlay);
        successModal.querySelector('button').onclick = () => {
            successOverlay.style.opacity = '0';
            successOverlay.style.visibility = 'hidden';
            successModal.style.opacity = '0';
            successModal.style.visibility = 'hidden';
            successModal.style.transform = 'scale(0.7)';
        };
        successOverlay.onclick = (e) => {
            if (e.target === successOverlay) {
                successOverlay.style.opacity = '0';
                successOverlay.style.visibility = 'hidden';
                successModal.style.opacity = '0';
                successModal.style.visibility = 'hidden';
                successModal.style.transform = 'scale(0.7)';
            }
        };

        function showSuccessModal() {
            successOverlay.style.opacity = '1';
            successOverlay.style.visibility = 'visible';
            successModal.style.opacity = '1';
            successModal.style.visibility = 'visible';
            successModal.style.transform = 'scale(1)';
        }

        function updateCountdown() {
            const now = new Date().getTime();
            let distance = christmasDate - now;
            if (distance <= 0 && !isUnlocked) {
                isUnlocked = true;
                countdownElement.style.display = 'none';
                greetingTitle.style.display = 'block';
                allCardContainers.forEach(container => container.classList.add('unlocked'));
                showSuccessModal();
            }
            distance = Math.max(0, distance);
            const days = Math.floor(distance / (1000 * 60 * 60 * 24));
            const hours = Math.floor((distance % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
            const minutes = Math.floor((distance % (1000 * 60 * 60)) / (1000 * 60));
            const seconds = Math.floor((distance % (1000 * 60)) / 1000);
            document.getElementById('days').innerText = days.toString().padStart(2, '0');
            document.getElementById('hours').innerText = hours.toString().padStart(2, '0');
            document.getElementById('minutes').innerText = minutes.toString().padStart(2, '0');
            document.getElementById('seconds').innerText = seconds.toString().padStart(2, '0');
            document.getElementById('daysWarning').innerText = days.toString().padStart(2, '0');
            document.getElementById('hoursWarning').innerText = hours.toString().padStart(2, '0');
            document.getElementById('minutesWarning').innerText = minutes.toString().padStart(2, '0');
            document.getElementById('secondsWarning').innerText = seconds.toString().padStart(2, '0');
        }
        greetingTitle.style.display = 'none';
        updateCountdown();
        setInterval(updateCountdown, 1000);

        allCardContainers.forEach(container => {
            container.addEventListener('click', (e) => {
                if (!isUnlocked) {
                    e.preventDefault();
                    e.stopPropagation();
                    document.getElementById('warningOverlay').classList.add('active');
                    document.getElementById('warningModal').classList.add('active');
                }
            });
        });

        document.getElementById('closeWarningBtn').addEventListener('click', () => {
            document.getElementById('warningOverlay').classList.remove('active');
            document.getElementById('warningModal').classList.remove('active');
        });
        document.getElementById('warningOverlay').addEventListener('click', () => {
            document.getElementById('warningOverlay').classList.remove('active');
            document.getElementById('warningModal').classList.remove('active');
        });

        function trySwitchTab(id) {
            if (!isUnlocked && id !== 'home') {
                document.getElementById('warningOverlay').classList.add('active');
                document.getElementById('warningModal').classList.add('active');
                return;
            }
            showSection(id);
        }

        function showSection(id) {
            const currentActive = document.querySelector('section.active');
            if (currentActive) {
                currentActive.classList.remove('active');
            }
            setTimeout(() => {
                const newSection = document.getElementById(id);
                newSection.classList.add('active');
                window.scrollTo(0, 0);
                document.querySelectorAll('.menu-items a').forEach(a => a.classList.remove('active'));
                document.querySelector(`.menu-items a[onclick="trySwitchTab('${id}')"]`).classList.add('active');
            }, 100);
        }

        const modal = document.getElementById('myModal');
        function openModal(src) { modal.classList.add('active'); document.getElementById('modalImg').src = src; }
        function closeModal() { modal.classList.remove('active'); }
        modal.addEventListener('click', (e) => { if (e.target === modal || e.target.classList.contains('modal-overlay') || e.target.classList.contains('close')) closeModal(); });

        const music = document.getElementById('backgroundMusic');
        const originalTracks = ['merry_christmas.mp3', 'Santa_Tell_Me.mp3', 'jingle_bells.mp3'];
        let tracks = [...originalTracks];
        for (let i = tracks.length - 1; i > 0; i--) {
            const j = Math.floor(Math.random() * (i + 1));
            [tracks[i], tracks[j]] = [tracks[j], tracks[i]];
        }
        let currentTrackIndex = 0;
        music.volume = 0.3;
        function loadCurrentTrack() { music.src = tracks[currentTrackIndex]; }
        function playMusic() { music.play().catch(() => { document.getElementById('musicToggle').innerHTML = 'ğŸ”‡'; }); }
        window.addEventListener('load', () => { loadCurrentTrack(); playMusic(); document.getElementById('musicToggle').innerHTML = 'ğŸµ'; });
        music.addEventListener('ended', () => { currentTrackIndex = (currentTrackIndex + 1) % tracks.length; loadCurrentTrack(); playMusic(); });
        function toggleMusic() { music.paused ? (playMusic(), document.getElementById('musicToggle').innerHTML = 'ğŸµ') : (music.pause(), document.getElementById('musicToggle').innerHTML = 'ğŸ”‡'); }

        let snowInterval = null;
        function createSnow() {
            const snow = document.createElement('div');
            snow.classList.add('snowflake');
            snow.innerHTML = ['â„', 'âœ¨', 'â…', 'â­', 'ğŸ„'][Math.floor(Math.random()*5)];
            snow.style.left = Math.random() * 100 + 'vw';
            snow.style.animationDuration = Math.random() * 5 + 5 + 's';
            snow.style.opacity = Math.random() * 0.8 + 0.2;
            snow.style.fontSize = Math.random() * 20 + 15 + 'px';
            document.body.appendChild(snow);
            snow.addEventListener('animationend', () => snow.remove());
        }
        function startSnow() { if (!snowInterval) snowInterval = setInterval(createSnow, 150); }
        function stopSnow() { if (snowInterval) { clearInterval(snowInterval); snowInterval = null; } }
        document.addEventListener('visibilitychange', () => document.hidden ? stopSnow() : startSnow());
        startSnow();

        document.addEventListener('DOMContentLoaded', () => {
            const grid = document.getElementById('photosGrid');
            const totalPhotos = 25;
            let indices = Array.from({length: totalPhotos}, (_, i) => i + 1);
            for (let i = indices.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [indices[i], indices[j]] = [indices[j], indices[i]];
            }
            indices.forEach(num => {
                const rotate = (Math.random() * 24 - 12).toFixed(2);
                const div = document.createElement('div');
                div.className = 'photo-frame';
                div.style.setProperty('--rotate', rotate + 'deg');
                div.onclick = () => openModal(`img_em/${num}.jpg`);
                const img = document.createElement('img');
                img.src = `img_em/${num}.jpg`;
                img.alt = `áº¢nh ${num}`;
                img.loading = "lazy";
                div.appendChild(img);
                grid.appendChild(div);
            });
        });

        const messageWrapper = document.querySelector('#home .back .message-wrapper');
        const revealBtn = document.getElementById('revealReplyBtn');
        messageWrapper.addEventListener('scroll', () => {
            if (messageWrapper.scrollHeight - messageWrapper.scrollTop - messageWrapper.clientHeight < 100) {
                revealBtn.classList.add('visible');
            }
        });

        const replyOverlay = document.getElementById('replyOverlay');
        const replyModal = document.getElementById('replyModal');
        const sendBtn = document.getElementById('sendReplyBtn');
        const replyTextarea = document.getElementById('replyTextarea');
        const replyMessage = document.getElementById('replyMessage');

        function openReplyModal() { replyOverlay.classList.add('active'); replyModal.classList.add('active'); }
        function closeReplyModal() { replyOverlay.classList.remove('active'); replyModal.classList.remove('active'); replyMessage.style.display = 'none'; }
        revealBtn.addEventListener('click', openReplyModal);
        replyOverlay.addEventListener('click', closeReplyModal);

        sendBtn.addEventListener('click', () => {
            if (replyTextarea.value.trim() === '') { alert('Em viáº¿t gÃ¬ Ä‘Ã³ cho mÃ¬nh Ä‘i mÃ  ğŸ¥º'); return; }
            const formData = new FormData();
            formData.append('Lá»i chÃºc GiÃ¡ng sinh', replyTextarea.value);
            formData.append('_subject', 'Lá»i chÃºc GiÃ¡ng sinh má»›i tá»« em áº¥y! ğŸ„â¤ï¸');
            formData.append('_captcha', 'false');
            sendBtn.innerHTML = 'Äang gá»­i... ğŸ’Œ';
            sendBtn.disabled = true;
            fetch('https://formsubmit.co/ajax/tri12345678s@gmail.com', { method: 'POST', body: formData })
                .then(() => {
                    replyMessage.style.display = 'block';
                    replyTextarea.value = '';
                    sendBtn.innerHTML = 'Gá»­i Ä‘i ğŸ’Œ';
                    sendBtn.disabled = false;
                }).catch(() => {
                    alert('Lá»—i gá»­i, thá»­ láº¡i nhÃ©!');
                    sendBtn.innerHTML = 'Gá»­i Ä‘i ğŸ’Œ';
                    sendBtn.disabled = false;
                });
        });

        const loadMoreBtn = document.getElementById('loadMoreBtn');
        const endGalleryOverlay = document.getElementById('endGalleryOverlay');
        const endGalleryModal = document.getElementById('endGalleryModal');
        const thankYouOverlay = document.getElementById('thankYouOverlay');
        const thankYouModal = document.getElementById('thankYouModal');

        loadMoreBtn.addEventListener('click', () => { endGalleryOverlay.classList.add('active'); endGalleryModal.classList.add('active'); });
        endGalleryOverlay.addEventListener('click', () => { endGalleryOverlay.classList.remove('active'); endGalleryModal.classList.remove('active'); });

        document.getElementById('yesBtn').addEventListener('click', () => {
            const formData = new FormData();
            formData.append('CÃ¢u tráº£ lá»i', 'CÃ³ chá»© â¤ï¸');
            formData.append('_subject', 'Em áº¥y chá»n: CÃ³ chá»© â¤ï¸');
            formData.append('_captcha', 'false');
            fetch('https://formsubmit.co/ajax/tri12345678s@gmail.com', { method: 'POST', body: formData })
                .then(() => {
                    endGalleryOverlay.classList.remove('active');
                    endGalleryModal.classList.remove('active');
                    thankYouOverlay.classList.add('active');
                    thankYouModal.classList.add('active');
                }).catch(() => alert('Lá»—i gá»­i, thá»­ láº¡i nhÃ©!'));
        });

        document.getElementById('noBtn').addEventListener('click', () => {
            const formData = new FormData();
            formData.append('CÃ¢u tráº£ lá»i', 'KhÃ´ng ğŸ˜¢');
            formData.append('_subject', 'Em áº¥y chá»n: KhÃ´ng ğŸ˜¢');
            formData.append('_captcha', 'false');
            fetch('https://formsubmit.co/ajax/tri12345678s@gmail.com', { method: 'POST', body: formData })
                .then(() => { endGalleryOverlay.classList.remove('active'); endGalleryModal.classList.remove('active'); })
                .catch(() => alert('Lá»—i gá»­i, thá»­ láº¡i nhÃ©!'));
        });

        thankYouOverlay.addEventListener('click', () => { thankYouOverlay.classList.remove('active'); thankYouModal.classList.remove('active'); });

        function checkOrientation() {
            if (window.innerWidth < 768) {
                if (window.innerHeight > window.innerWidth) document.body.classList.add('portrait');
                else document.body.classList.remove('portrait');
            } else document.body.classList.remove('portrait');
        }
        window.addEventListener('resize', checkOrientation);
        window.addEventListener('orientationchange', checkOrientation);
        checkOrientation();

        // PHáº¦N NOTE
        document.querySelectorAll('.note').forEach(note => {
            const randomRotate = (Math.random() * 16 - 8).toFixed(1);
            note.style.transform = `rotate(${randomRotate}deg)`;
        });

        const noteOverlay = document.getElementById('noteOverlay');
        const noteModal = document.getElementById('noteModal');
        const noteTitle = document.getElementById('noteTitle');
        const noteContent = document.getElementById('noteContent');
        const closeNoteBtn = document.getElementById('closeNoteBtn');

        document.querySelectorAll('.note').forEach(note => {
            note.addEventListener('click', () => {
                const type = note.dataset.type;
                let title = '';
                let message = '';
                switch (type) {
                    case 'nho-em':
                        title = 'Nhá»› em';
                        message = 'Anh Ä‘ang nhá»› em ráº¥t nhiá»u... Chá»‰ muá»‘n Ã´m em má»™t cÃ¡i tháº­t cháº·t ngay bÃ¢y giá». â¤ï¸';
                        break;
                    case 'yeu-em':
                        title = 'YÃªu em';
                        message = 'Anh yÃªu em, hÃ´m nay, ngÃ y mai, vÃ  mÃ£i mÃ£i sau nÃ y. KhÃ´ng cáº§n lÃ½ do, chá»‰ cáº§n lÃ  em. â¤ï¸';
                        break;
                    case 'ap-luc':
                        title = 'Ãp lá»±c';
                        message = 'Em Ä‘ang cáº£m tháº¥y Ã¡p lá»±c háº£? Anh biáº¿t nÄƒm lá»›p 12 khÃ³ khÄƒn láº¯m, nhÆ°ng em giá»i giang vÃ  máº¡nh máº½. HÃ£y nghá»‰ ngÆ¡i má»™t chÃºt, anh luÃ´n á»Ÿ Ä‘Ã¢y Ä‘á»ƒ láº¯ng nghe em. ChÃºng ta sáº½ vÆ°á»£t qua cÃ¹ng nhau! â¤ï¸';
                        break;
                    case 'met-moi':
                        title = 'Má»‡t má»i';
                        message = 'Em má»‡t rá»“i sao? HÃ£y Ä‘á»ƒ anh gá»­i cho em má»™t cÃ¡i Ã´m áº¥m Ã¡p. Nhá»› Äƒn uá»‘ng Ä‘áº§y Ä‘á»§ vÃ  ngá»§ ngon nhÃ©. Anh tá»± hÃ o vá» em láº¯m! ğŸ„';
                        break;
                    case 'dang-khoc':
                        title = 'Äang khÃ³c';
                        message = 'Em khÃ³c Ã ? Anh Æ°á»›c gÃ¬ cÃ³ thá»ƒ lau nÆ°á»›c máº¯t cho em ngay bÃ¢y giá». Má»i chuyá»‡n sáº½ á»•n thÃ´i, anh tin em. HÃ£y ká»ƒ cho anh nghe náº¿u em muá»‘n. YÃªu em! ğŸ˜˜';
                        break;
                    case 'buon':
                        title = 'Buá»“n';
                        message = 'Em Ä‘ang buá»“n háº£? Anh á»Ÿ Ä‘Ã¢y Ä‘á»ƒ lÃ m em vui. Nhá»› nhá»¯ng ká»· niá»‡m Ä‘áº¹p cá»§a chÃºng ta Ä‘i, vÃ  anh sáº½ táº¡o thÃªm nhiá»u ná»¯a. CÆ°á»i lÃªn nÃ o, cÃ´ng chÃºa cá»§a anh! ğŸŒŸ';
                        break;
                }
                noteTitle.innerText = title;
                noteContent.innerText = message;
                noteOverlay.classList.add('active');
                noteModal.classList.add('active');
            });
        });

        closeNoteBtn.addEventListener('click', () => {
            noteOverlay.classList.remove('active');
            noteModal.classList.remove('active');
        });
        noteOverlay.addEventListener('click', (e) => {
            if (e.target === noteOverlay) {
                noteOverlay.classList.remove('active');
                noteModal.classList.remove('active');
            }
        });
    </script>
</body>
</html>
